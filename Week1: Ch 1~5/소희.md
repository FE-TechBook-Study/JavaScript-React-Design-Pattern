# ì†Œí¬

# ë°œí‘œ ì£¼ì œ: React ê¸°ë°˜ ë‚˜ë§Œì˜ ì¡°í•© ê°€ëŠ¥í•œ, í—¤ë“œë¦¬ìŠ¤ ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ê¸°

> Rich UI codebase has the best resource for learning react composition
> í’ë¶€í•œ UI ì½”ë“œë² ì´ìŠ¤ëŠ” ë¦¬ì•¡íŠ¸ ì¡°í•©ì„ ë°°ìš°ëŠ” ìµœê³ ì˜ ìì›ì´ë‹¤.

- [Kent C. Dodds](https://github.com/kentcdodds)
  >

## React UI

[React UI](https://reach.tech/) ëŠ” React ê¸°ë°˜ì˜ UI ì»´í¬ë„ŒíŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ, ì ‘ê·¼ì„±ì„ í•µì‹¬ì— ë‘ê³  ì„¤ê³„ëœ ë„êµ¬ì´ë‹¤.

React ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ë””ìì¸ ì‹œìŠ¤í…œì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•œ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‰½ê²Œ êµ¬ì¶•í•  ìˆ˜ ìˆë„ë¡ ë•ëŠ”ë‹¤.

Reach UIì˜ ì»´í¬ë„ŒíŠ¸ì—ëŠ” ì•„ì½”ë””ì–¸, ëŒ€í™”ìƒì, íˆ´íŒ, ë©”ë‰´ ë²„íŠ¼ ë“±ê³¼ ê°™ì´ ì›¹ì—ì„œ í”íˆ ì‚¬ìš©í•˜ëŠ” UI ìš”ì†Œë“¤ì´ í¬í•¨ ë˜ì–´ ìˆìœ¼ë©°, ê° ìš”ì†ŒëŠ” ì‚¬ìš©ìê°€ ì§ì ‘ ìŠ¤íƒ€ì¼ì„ ì§€ì •í•˜ê³  êµ¬ì¡°ë¥¼ ì œì–´í• ìˆ˜ ìˆëŠ” ìœ ì—°í•¨ì„ ì œê³µí•œë‹¤.

ì´ë¥¼ í†µí•´, íŠ¹ì • ìŠ¤íƒ€ì¼ì´ë‚˜ ë””ìì¸ì— ì¢…ì†ë˜ì§€ ì•Šê³  ê° í”„ë¡œì íŠ¸ì˜ ìš”êµ¬ ì‚¬í•­ì— ë§ì¶˜ ì‚¬ìš©ì ì •ì˜ê°€ ìš©ì´í•˜ë‹¤.

[**ğŸ’»Â React UI - Accordion code base**](https://reach.tech/accordion)

ì´ ê¸€ì—ì„œëŠ” React UI Accordion ì™€ Radix UI Accordionì˜ ì—­ì„¤ê³„í•˜ê³ , Headlessë¡œ êµ¬ì„±í•  ìˆ˜ ìˆëŠ” Accordionì„ ì²˜ìŒë¶€í„° ë§Œë“¤ì–´ ë´„ë…€ì„œ ê·¸ ê³¼ì •ì„ ë¬¸ì„œí™”í•˜ì˜€ë‹¤.

ì£¼ ëª©ì ì€ Accordionì„ ë§Œë“œëŠ” ê²ƒì´ì§€ë§Œ, ì´ë¥¼ í†µí•´ ì˜¤í”ˆì†ŒìŠ¤ ì¡°í•© ì»´í¬ë„ŒíŠ¸ê°€ ì–´ë–»ê²Œ ë§Œë“¤ì–´ì§€ëŠ”ì§€ íƒêµ¬í•˜ëŠ” ë° ìˆë‹¤.

ì—¬ê¸°ì„œ ë°°ìš°ëŠ” íŒ¨í„´ì€ Reactì—ì„œ Tabs, Menuì™€ ê°™ì€ ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ ë•Œ ìœ ìš©í•  ê²ƒì´ë‹¤.

## God Component

ì‹¤ë¬´ì—ì„œ, ì–´ë–¤ ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ ë•Œ(ì—¬ê¸°ì—ì„œëŠ” Accordion), ìš°ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ë§Œë“ ë‹¤.

```tsx
const accordionData = [
  { id: 1, headingText: "Heading 1", panel: "Panel1 Content" },
  { id: 2, headingText: "Heading 2", panel: "Panel2 Content" },
  { id: 3, headingText: "Heading 3", panel: "Panel3 Content" },
];
const SomeComponent = () => {
  const [activeIndex, setActiveIndex] = useState(0);

  return (
    <div>
      <Accordion
        data={accordionData}
        activeIndex={activeIndex}
        onChange={setActiveIndex}
      />
    </div>
  );
};

function Accordion({ data, activeIndex, onChange }) {
  return (
    <div>
      {data.map((item, idx) => (
        <div key={item.id}>
          <button onClick={() => onChange(idx)}>{item.headingText}</button>
          <div hidden={activeIndex !== idx}>{item.panel}</div>
        </div>
      ))}
    </div>
  );
}
```

ê·¸ë¦¬ê³  ìš”êµ¬ì‚¬í•­ì´ ë³€ê²½ëë‹¤ê³  ê°€ì •í•´ë³´ì.

ì´ì œ ìš°ë¦¬ëŠ” Accorion button/headingì— ì•„ì´ì½˜ì„ ì¶”ê°€í•˜ê³ , ì¡°ê¸ˆ ë‹¤ë¥¸ ìŠ¤íƒ€ì¼ë§ì„ ì¶”ê°€í•˜ê³ , ë˜ ë‹¤ë¥¸ ìš”êµ¬ì‚¬í•­ì„ ì¶”ê°€í•˜ê²Œ ëœë‹¤.

```tsx
~~- function Accordion({ data, activeIndex, onChange }) {~~
**+ function Accordion({ data, activeIndex, onChange, displaySomething, doNothing }) {
+ if (doNothing) return**
  return (
    <div>
      {data.map((item, idx) => (
        <div key={item.id}>
          <button onClick={() => onChange(idx)}>
            {item.headingText}
+            **{item.icon? (
+              <span className='someClassName'>{item.icon}</span>
+            ) : null}**
          </button>
~~-          <div hidden={activeIndex !== idx}>{item.panel}</div>~~
**+**          **<div hidden={activeIndex !== idx}>
+            {item.panel}
+            {displaySomething}
+          </div>**
        </div>
      ))}
    </div>
  )
}
```

ì´ì²˜ëŸ¼ ìš”êµ¬ì‚¬í•­ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ â€œGod ì»´í¬ë„ŒíŠ¸â€ë¥¼ ë¦¬íŒ©í† ë§í•˜ì—¬ ê° ì‚¬ìš© ì»´í¬ë„ŒíŠ¸ì˜ ìš”êµ¬ì— ë§ê²Œ ìˆ˜ì •í•´ì•¼ í•œë‹¤. ë§Œì•½ ì—¬ëŸ¬ í”„ë¡œì íŠ¸ì—ì„œ ë‹¤ë¥´ê²Œ ì‚¬ìš©ë  ì»´í¬ë„ŒíŠ¸ë‚˜, OSS(ì˜¤í”ˆ ì†ŒìŠ¤ ì†Œí”„íŠ¸ì›¨ì–´) ì»´í¬ë„ŒíŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ êµ¬ì¶•í•˜ë ¤ í•œë‹¤ë©´, ì´ëŸ¬í•œ â€œGod ì»´í¬ë„ŒíŠ¸â€ ë°©ì‹ì€ ì„±ê³µí•˜ê¸° ì–´ë ¤ìš¸ ê²ƒì´ë‹¤.

ì´ ì˜ˆì‹œëŠ” ë‹¨ìˆœí™”ëœ ì˜ˆì‹œì´ì§€ë§Œ, ì´ ì ‘ê·¼ë²•ì˜ ë¬¸ì œì ‘ì— ëŒ€í•´ì„œ ì–´ë–»ê²Œ ë°œìƒí•  ìˆ˜ ìˆì„ì§€ ì˜ ë³´ì—¬ì¤€ë‹¤.

## Compound Components (ë³µí•© ì»´í¬ë„ŒíŠ¸)

ê·¸ë ‡ë‹¤ë©´, **ë³µí•© ì»´í¬ë„ŒíŠ¸**ë€ ë¬´ì—‡ì¼ê¹Œ?

ë³µí•© ì»´í¬ë„ŒíŠ¸ëŠ” ì˜ë¯¸ ì—†ëŠ” ì‘ì€ ì»´í¬ë„ŒíŠ¸ë“¤ì„ ì¡°í•©í•˜ì—¬ í•˜ë‚˜ì˜ ì˜ë¯¸ ìˆëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“œëŠ” íŒ¨í„´ì´ë‹¤.

> Think of compound components like theÂ `<select>`Â andÂ `<option>`Â elements in HTML. Apart they don't do too much, but together they allow you to create the complete experience. The way they do this is by sharing an implicit state between the components. Compound components allow you to create and use components that share this state implicitly.
> ë³µí•© ì»´í¬ë„ŒíŠ¸ëŠ” HTMLì˜ `<select>` ì™€ `<option>` ìš”ì†Œë¥¼ ìƒê°í•´ë³´ë©´ ì´í•´í•˜ê¸° ì‰½ë‹¤. ê°œë³„ì ìœ¼ë¡œëŠ” í° ì˜ë¯¸ê°€ ì—†ì§€ë§Œ, í•¨ê»˜ ì‚¬ìš©í•  ë•Œ ì™„ì „í•œ ê²½í—˜ì„ ì œê³µí•œë‹¤. ì´ë“¤ì´ ì´ë¥¼ ê°€ëŠ¥í•˜ê²Œ í•˜ëŠ” ë°©ë²•ì€ ì»´í¬ë„ŒíŠ¸ ê°„ì— ì•”ë¬µì ì¸ ìƒíƒœë¥¼ ê³µìœ í•˜ê²Œ ë•Œë¬¸ì´ë‹¤.
> **ë³µí•© ì»´í¬ë„ŒíŠ¸**ëŠ” ì´ëŸ¬í•œ ìƒíƒœë¥¼ ì•”ë¬µì ìœ¼ë¡œ ê³µìœ í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ê³  ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.
> -Â [Kent C. Dodds](https://twitter.com/kentcdodds)

### HTML ì˜ˆì‹œ ì½”ë“œ

```tsx
<select>
    <option>Option1</option>
    <option>Option2</option>
</select>

<ul>
  <li>Item 1</li>
  <li>Item 2</li>
  <li>Item 3</li>
</ul>

<table>
    <tr>
    <thead>....
    <tbody>
        <tr>...
        <td>..
    ...
</table>
```

ë³µí•© ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬, ìš°ë¦¬ê°€ God ì»´í¬ë„ŒíŠ¸ ì„¹ì…˜ì—ì„œ ê°œë°œí–ˆë˜ ì•„ì½”ë””ì–¸ì„ ë‹¤ìŒê³¼ ê°™ì´ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.

```tsx
<Accordion>
  <AccordionItem>
    <AccordionButton>Heading 1</AccordionButton>
    <AccordionPanel>Panel 1</AccordionPanel>
  </AccordionItem>
  <AccordionItem>
    <AccordionButton>Heading 2</AccordionButton>
    <AccordionPanel>Panel 2</AccordionPanel>
  </AccordionItem>
  <AccordionItem>
    <AccordionButton>Heading 3</AccordionButton>
    <AccordionPanel>Panel 3</AccordionPanel>
  </AccordionItem>
</Accordion>
```

ì—¬ê¸°ì„œ, ê° íƒœê·¸ë“¤(`<Accordion>`, `<AccordionItem>` ë“±) ë‹¨ë…ìœ¼ë¡œëŠ” ë™ì‘í•˜ì§€ ì•Šì„ ê²ƒì´ë‹¤.

ì™„ì „íˆ ë™ì‘í•˜ëŠ” ì•„ì½”ë””ì–¸ì„ ì–»ê¸° ìœ„í•´ì„ , ìœ„ì˜ íƒœê·¸ë“¤ì„ í•¨ê»˜ ì¡°í•©í•´ì•¼ í•œë‹¤.

ë³µí•© ì»´í¬ë„ŒíŠ¸ëŠ” `Context API` ë¥¼ ì‚¬ìš©í•˜ì—¬ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

## Accordion ë³µí•© ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ê¸°

- `Accordion` êµ¬ì„± ìš”ì†Œ ìƒì„±í•˜ê¸°
  - `Accordion`, `AccordionItem`, `AccordionButton`, `AccordionPanel`ì´ë¼ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•˜ì—¬ ì•„ì½”ë””ì–¸ì˜ ê° ìš”ì†Œë¥¼ ê°œë°œí•œë‹¤. (ì´ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ì¡°í•©ë˜ì–´ ì „ì²´ `Accodion` ì„ ë§Œë“ ë‹¤.)
- forwardRef ë˜í•‘í•˜ê¸°
  - ê° Accordion ìš”ì†Œ ì»´í¬ë„ŒíŠ¸ë¥¼ `forwardRef` ë¡œ ë˜í•‘í•˜ì—¬ í•´ë‹¹ ìš”ì†Œì˜ DOM ë…¸ë“œë¥¼ ì™¸ë¶€ë¡œ ë…¸ì¶œí•  ìˆ˜ ìˆê²Œ í•¨ìœ¼ë¡œì¨, DOM ë…¸ë“œì— ì§ì ‘ ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ í•œë‹¤.
- HTML ìš”ì†Œ í˜¹ì€ React ì»´í¬ë„ŒíŠ¸ë¥¼ ë‚˜íƒ€ë‚´ëŠ” `as` props ì‚¬ìš©í•˜ê¸°
  - `as` ë¥¼ í†µí•´ Accordion ìš”ì†Œê°€ ì–´ë–¤ HTML íƒœê·¸ë¡œ ë Œë”ë§ë ì§€ ì§€ì •í•  ìˆ˜ ìˆë‹¤. ê¸°ë³¸ê°’ìœ¼ë¡œ `div` ë¥¼ ì‚¬ìš©í•˜ê³ , `AccordionButton` ì˜ ê²½ìš° `button` íƒœê·¸ê°€ ê¸°ë³¸ê°’ì´ë‹¤.
- `data-*` ì†ì„± ì ìš©í•˜ê¸°
  - ê° Accordion ìš”ì†Œ ì»´í¬ë„ŒíŠ¸ì— `data-*` ì†ì„±ì„ ì¶”ê°€í•˜ì—¬ CSS ì„ íƒìë¡œ ìŠ¤íƒ€ì¼ì„ ì§€ì •í•˜ê±°ë‚˜ í…ŒìŠ¤íŠ¸ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.

```tsx
const Accordion = forwardRef(function (
  { children, as: Comp = "div", ...props }: AccordionProps,
  forwardedRef
) {
  return (
    <Comp {...props} ref={forwardedRef} data-hb-accordion="">
      {children}
    </Comp>
  );
});

const AccordionItem = forwardRef(function (
  { children, as: Comp = "div", ...props }: AccordionItemProps,
  forwardedRef
) {
  return (
    <Comp {...props} ref={forwardedRef} data-hb-accordion-item="">
      {children}
    </Comp>
  );
});

const AccordionButton = forwardRef(function (
  { children, as: Comp = "button", ...props }: AccordionButtonProps,
  forwardedRef
) {
  return (
    <Comp {...props} ref={forwardedRef} data-hb-accordion-button="">
      {children}
    </Comp>
  );
});

const AccordionPanel = forwardRef(function (
  { children, as: Comp = "div", ...props }: AccordionPanelProps,
  forwardedRef
) {
  return (
    <Comp {...props} ref={forwardedRef} data-hb-accordion-panel="">
      {children}
    </Comp>
  );
});
```

```jsx
<Accordion>
  <Accordion.Item>
    <Accordion.Button>Button 1</Accordion.Button>
    <Accordion.Panel>Panel 1</Accordion.Panel>
  </Accordion.Item>
  <Accordion.Item>
    <Accordion.Button>Button 2</Accordion.Button>
    <Accordion.Panel>Panel 2</Accordion.Panel>
  </Accordion.Item>
  <Accordion.Item>
    <Accordion.Button>Button 3</Accordion.Button>
    <Accordion.Panel>Panel 3</Accordion.Panel>
  </Accordion.Item>
</Accordion>
```

## ContextAPIë¥¼ ì‚¬ìš©í•œ ìƒíƒœ ê´€ë¦¬

Accordionì˜ ê° í•­ëª© ìƒíƒœì™€ ì—´ë¦¼/ë‹«í˜ ìƒíƒœë¥¼ ì¶”ì í•˜ê¸° ìœ„í•´ Context APIë¥¼ ì‚¬ìš©í•œë‹¤.

```tsx
const AccordionContext = createContext({});
const AccordionItemContext = createContext({});

const useAccordionContext = () => {
  const context = useContext(AccordionContext);
  if (!context) {
    throw Error("useAccordionContextëŠ” Accordion ì•ˆì—ì„œë§Œ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.");
  }
  return context;
};

const useAccordionItemContext = () => {
  const context = useContext(AccordionItemContext);
  if (!context) {
    throw Error(
      "useAccordionItemContextëŠ” AccordionItem ì•ˆì—ì„œë§Œ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤."
    );
  }
  return context;
};
```

- AccordionContextì™€ AccordionItemContext ìƒì„±
  - `AccordionContext`ì™€ `AccordionItemContext`ë¥¼ ìƒì„±í•˜ì—¬, ì•„ì½”ë””ì–¸ì˜ ì „ì—­ ìƒíƒœì™€ ê°œë³„ í•­ëª© ìƒíƒœë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ í•œë‹¤.
  - `AccordionContext`ëŠ” ì „ì²´ ì•„ì½”ë””ì–¸ì˜ ì—´ë¦¼/ë‹«í˜ ìƒíƒœì™€ ìƒíƒœ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ë¥¼ ê´€ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ëœë‹¤.
  - `AccordionItemContext`ëŠ” ê°œë³„ ì•„ì½”ë””ì–¸ í•­ëª©ì˜ ìƒíƒœ(ì˜ˆ: í•­ëª©ì´ ë¹„í™œì„±í™”ë˜ì—ˆëŠ”ì§€, í•­ëª©ì˜ ì¸ë±ìŠ¤ ë“±)ë¥¼ ê´€ë¦¬í•œë‹¤.

## shadcn accordion

```tsx
import {
  Accordion,
  AccordionContent,
  AccordionItem,
  AccordionTrigger,
} from "@/components/ui/accordion";
import { ExtendedAccordionItem } from "@/types/headless";

interface HeadlessAccordionProps {
  data: ExtendedAccordionItem[];
}

const ShadcnAccordion = ({ data }: HeadlessAccordionProps) => {
  return (
    <Accordion type="single" collapsible className="w-[300px]">
      {data?.map((item) => (
        <AccordionItem key={item.id} value={item.id.toString()}>
          <AccordionTrigger>{item.headingText}</AccordionTrigger>
          <AccordionContent>{item.panel}</AccordionContent>
        </AccordionItem>
      ))}
    </Accordion>
  );
};

export default ShadcnAccordion;
```

## ë§ˆë¬´ë¦¬

- God ì»´í¬ë„ŒíŠ¸ëŠ” ëª¨ë“  ë¡œì§ì„ í•˜ë‚˜ì˜ `div`ì— í¬í•¨í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ ê°„ ì˜ì¡´ì„±ì´ ë†’ê³  í™•ì¥ì— ì œí•œì´ ìˆë‹¤.
- ë°˜ë©´, Headless(ë° Shadcn) Accordion ì»´í¬ë„ŒíŠ¸ëŠ” ê°œë³„ì ì¸ ì»´í¬ë„ŒíŠ¸ë¡œ ë¶„ë¦¬ë˜ì–´ ìœ ì—°ì„±ê³¼ ì¬ì‚¬ìš©ì„±ì´ ë†’ì•„ ìš”êµ¬ ì‚¬í•­ ë³€í™”ì— ì‰½ê²Œ ëŒ€ì‘í•  ìˆ˜ ìˆë‹¤.

### ì›ë¬¸ ì¶œì²˜

https://dev.to/haribhandari/react-build-your-own-composable-headless-components-170b

### ì°¸ê³  ìë£Œ

https://ui.shadcn.com/docs/components/accordion
